import { Callout, Steps, Tabs } from "nextra/components";

# Image Upload carousel

This is a carousel that allows you to upload images and display them in a carousel.

<Callout type="warning" emoji="⚠️">
  This Component is still in development and is not ready for production use use
  at your own risk.
</Callout>

## Installation

<Callout type="warning">
  For this component to work you need to have the carousel component that is
  built , you can find it here [Carousel](carousel.mdx)
</Callout>

<Steps>
  ### Install the package from radix
  ```bash copy
    npm install embla-carousel@latest embla-carousel-react@latest
  ```
  
  ### Copy past the code that you will find in this github file
  ```link copy
  https://github.com/BelkacemYerfa/shadcn-extension-components/blob/master/packages/src/components/extension/carousel/carousel-image-upload.tsx
  ```

</Steps>

## API Reference

### Props

| Prop            |             Type              |      Default value |
| :-------------- | :---------------------------: | -----------------: |
| value           |          T[] or null          | your initial value |
| onValueChange   | (value : T[] or null) => void |                 -- |
| dropzoneOptions |        DropzoneOptions        |                 -- |
| reselect        |            boolean            |              false |

### value

This field follows the type of file that you use , it is an array of objects that have the following shape that you specified

#### Example

```typescript copy
{
  file : File,
  preview : string
}[]
```

### onValueChange

This function is called when the value of the state that you provided changes , it is called with the new value of the .

### dropzoneOptions

This is the options that you can pass to the dropzone hook , you can find the options that you can pass to the dropzone component [here](https://react-dropzone.js.org/)

### reselect

This is a boolean that you can pass to the component to allow the user to reselect the images that he uploaded already.

## Accessibility

This component is accessible , for keyboard support it uses the arrow keys to navigate between the images and the thumbs.

### keyboard support

| key                     |                       Description                       |
| :---------------------- | :-----------------------------------------------------: |
| `ArrowRight`            |           Horzintanly Increments by one step            |
| `ArrowLeft`             | Horzintanly/verticly Decrements by one step horzintanly |
| `Enter`                 |         Opens the image inputs from the device          |
| `Delete` or `Backspace` |           Removes the image from the carousel           |

## Usage Examples

This is an example of how you can use the component

````jsx copy
    import {
      CarouselMainContainer,
      CarouselThumbsContainer,
      CarouselNext,
      CarouselPrevious,
      CarouselProvider,
      SliderMainItem,
    } from "./carousel/carousel";
    import {
      CustomUploadInput,
      FileUploadCarouselProvider,
      SliderMiniItemWithRemove,
    } from "./carousel/carousel-image-upload";

    export const CarouselImageUpload = () => {
    const [preview, setPreview] = useState<FilePreview[] | null>(null);
      return (
        <CarouselProvider>
          <FileUploadCarouselProvider<FilePreview>
            value={preview}
            onValueChange={setPreview}
            dropzoneOptions={{
              maxFiles: 5,
              maxSize: 1024 * 1024 * 4,
              multiple: true,
            }}
          >
            {preview && preview.length > 0 ? (
              <>
                {preview.length > 1 && (
                  <>
                    <CarouselPrevious className="-left-2 z-[100] top-[35%] -translate-y-1/2 h-6 w-6" />
                    <CarouselNext className="-right-2 z-[100] top-[35%] -translate-y-1/2 h-6 w-6" />
                  </>
                )}
                <CarouselMainContainer className="space-y-1">
                  {preview.map((file, i) => (
                    <SliderMainItem key={i}>
                      <AspectRatio ratio={16 / 9}>
                        <Image
                          src={file.preview}
                          objectFit="cover"
                          alt="preview"
                          fill
                          className="rounded-md"
                        />
                      </AspectRatio>
                    </SliderMainItem>
                  ))}
                </CarouselMainContainer>
                <CarouselThumbsContainer>
                  {preview.map((file, i) => (
                    <SliderMiniItemWithRemove key={i} index={i}>
                      <AspectRatio ratio={16 / 9}>
                        <Image
                          src={file.preview}
                          objectFit="cover"
                          alt="preview"
                          fill
                          className="rounded-md"
                        />
                      </AspectRatio>
                    </SliderMiniItemWithRemove>
                  ))}
                </CarouselThumbsContainer>
                <CustomUploadInput className="border-none">
                  <Button
                    type="button"
                    variant="outline"
                    className={cn(`w-full`)}
                    disabled={preview.length >= 2}
                  >
                    Choose another image
                  </Button>
                </CustomUploadInput>
              </>
            ) : (
              <CustomUploadInput>
                <div className="flex items-center justify-center flex-col pt-5 pb-6">
                  <Icons.FileUpload >
                </div>
              </CustomUploadInput>
            )}
          </FileUploadCarouselProvider>
        </CarouselProvider>
      );
    };

    ```


````
