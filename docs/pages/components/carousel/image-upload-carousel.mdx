import { Callout, Steps, Tabs } from "nextra/components";

# Image Upload carousel

This is a carousel that allows you to upload images and display them in a carousel.

<Callout type="warning" emoji="⚠️">
  This Component is still in development and is not ready for production use use
  at your own risk.
</Callout>

## Installation

<Callout type="warning">
  For this component to work you need to have the carousel component that is
  built , you can find it here [Carousel](carousel.mdx)
</Callout>

<Steps>
  ### Install the package from radix
  ```bash copy
    npm install embla-carousel@8.0.0rc-17 embla-carousel-react@8.0.0rc-17
  ```
  <Callout type="warning" emoji="⚠️" >
    Make sure to install the correct version of the package that is specified in the installation command above , else you will get unexpected behavior from the component.
  </Callout>
  
  ### Copy past the code that you will find in this github file
  ```link copy
  https://github.com/BelkacemYerfa/shadcn-extension-components/blob/master/packages/src/components/extension/carousel/carousel-image-upload.tsx
  ```

</Steps>

## API Reference

### Props

| Prop            |             Type              |      Default value |
| :-------------- | :---------------------------: | -----------------: |
| value           |          T[] or null          | your initial value |
| onValueChange   | (value : T[] or null) => void |                 -- |
| dropzoneOptions |        DropzoneOptions        |                 -- |
| reselect        |            boolean            |              false |

### value

This field follows the type of file that you use , it is an array of objects that have the following shape that you specified

#### Example

```typescript
{
  file : File,
  preview : string
}
```

### onValueChange

This function is called when the value of the state that you provided changes , it is called with the new value of the .

### dropzoneOptions

This is the options that you can pass to the dropzone hook , you can find the options that you can pass to the dropzone component [here](https://react-dropzone.js.org/)

### reselect

This is a boolean that you can pass to the component to allow the user to reselect the images that he uploaded already.

### Example

This is an example of how you can use the component

<Tabs items={["code" , "preview"]} >
  <Tabs.Tab>
  
```jsx 
      import {
        CarouselMainContainer,
        CarouselThumbsContainer,
        CarouselNext,
        CarouselPrevious,
        CarouselProvider,
        SliderMainItem,
      } from "./carousel/carousel";
      import {
        CustomUploadInput,
        FileUploadCarouselProvider,
        SliderMiniItemWithRemove,
      } from "./carousel/carousel-image-upload";

      export const CarouselImageUpload = () => {
      const [preview, setPreview] = useState<FilePreview[] | null>(null);
        return (
          <CarouselProvider>
            <FileUploadCarouselProvider<FilePreview>
              value={preview}
              onValueChange={setPreview}
              dropzoneOptions={{
                maxFiles: 5,
                maxSize: 1024 * 1024 * 4,
                multiple: true,
              }}
            >
              {preview && preview.length > 0 ? (
                <>
                  {preview.length > 1 && (
                    <>
                      <CarouselPrevious className="-left-2 z-[100] top-[35%] -translate-y-1/2 h-6 w-6" />
                      <CarouselNext className="-right-2 z-[100] top-[35%] -translate-y-1/2 h-6 w-6" />
                    </>
                  )}
                  <CarouselMainContainer className="space-y-1">
                    {preview.map((file, i) => (
                      <SliderMainItem key={i}>
                        <AspectRatio ratio={16 / 9}>
                          <Image
                            src={file.preview}
                            objectFit="cover"
                            alt="preview"
                            fill
                            className="rounded-md"
                          />
                        </AspectRatio>
                      </SliderMainItem>
                    ))}
                  </CarouselMainContainer>
                  <CarouselThumbsContainer>
                    {preview.map((file, i) => (
                      <SliderMiniItemWithRemove key={i} index={i}>
                        <AspectRatio ratio={16 / 9}>
                          <Image
                            src={file.preview}
                            objectFit="cover"
                            alt="preview"
                            fill
                            className="rounded-md"
                          />
                        </AspectRatio>
                      </SliderMiniItemWithRemove>
                    ))}
                  </CarouselThumbsContainer>
                  <CustomUploadInput className="border-none">
                    <Button
                      type="button"
                      variant="outline"
                      className={cn(`w-full`)}
                      //disabled={preview.length >= 2}
                    >
                      Choose another image
                    </Button>
                  </CustomUploadInput>
                </>
              ) : (
                <CustomUploadInput>
                  <div className="flex items-center justify-center flex-col pt-5 pb-6">
                    <svg
                      className="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 20 16"
                    >
                      <path
                        stroke="currentColor"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"
                      />
                    </svg>
                    <p className="mb-2 text-sm text-gray-500 dark:text-gray-400">
                      <span className="font-semibold">Click to upload</span>
                      &nbsp; or drag and drop
                    </p>
                    <p className="text-xs text-gray-500 dark:text-gray-400">
                      SVG, PNG, JPG or GIF
                    </p>
                  </div>
                </CustomUploadInput>
              )}
            </FileUploadCarouselProvider>
          </CarouselProvider>
        );
      };

      ```

  </Tabs.Tab>
  <Tabs.Tab>
  none
  </Tabs.Tab>

</Tabs>
